{# Plantilla base #}{% extends 'gestion_inventario/layouts/base.html' %}
{# Cargar assets #}{% load static %}
{# Título de la ventana #} {% block titulo_ventana %}Gestionar Almacén{% endblock %}
{# Título de la página #} {% block titulo_pagina %}Gestionar Almacén{% endblock %}


{% block contenido %}
<div class="container py-4">

    <div class="row g-4 align-items-start">
        <!-- Imagen y datos del almacén -->
        <div class="col-12 col-lg-4">
            <div class="card shadow-sm">
                <img src="{% if seccion.imagen %}{{ seccion.imagen.url }}{% else %}{% static 'gestion_inventario/imagenes/default_almacen.png' %}{% endif %}"
                         class="card-img-top img-fluid" alt="Imagen {{ seccion.nombre }}">
                <div class="card-body fondo_secundario">
                    <h3 class="card-title h5 color_primario fs_mediana">{{ seccion.nombre }}</h3>
                    <p class="card-text mb-1 color_primario_variante fs_normal">{{ seccion.descripcion|default:"Sin descripción" }}</p>
                    <p class="small mb-2 color_primario_variante fs_pequena">Creado: {{ seccion.fecha_creacion|date:"d/m/Y H:i" }}</p>

                    <div class="d-grid gap-2 d-md-flex">
                        <a class="btn btn-primary me-md-2 fs_normal" href="{% url 'gestion_inventario:ruta_crear_compartimento' seccion.id %}">
                            <i class="fa-solid fa-plus"></i> Crear compartimento
                        </a>
                        <a class="btn btn-secondary fs_normal" href="{% url 'gestion_inventario:ruta_editar_almacen' seccion.id %}">
                            <i class="fa-solid fa-pen-to-square"></i> Editar almacén
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Compartimentos -->
        <div class="col-12 col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body fondo_secundario">
                    <h4 class="card-title h6 mb-3 color_primario_variante fs_mediana">Compartimentos</h4>

                    {% if compartimentos.exists %}
                    <div class="row row-cols-1 row-cols-md-2 g-3">
                        {% for c in compartimentos %}
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-body d-flex flex-column fondo_secundario_variante">
                                    <h5 class="card-title mb-1 color_primario fs_normal">{{ c.nombre }}</h5>
                                    <p class="card-text mb-3 color_primario_variante fs_pequena">{{ c.descripcion|default:"Sin descripción" }}</p>
                                    <div class="mt-auto d-flex justify-content-end">
                                        {# Aquí puedes añadir botones por compartimento (editar/eliminar) en el futuro #}
                                        <a class="btn btn-sm btn-outline-primary fs_normal" href="#">Ver</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <div class="alert alert-info mb-0" role="alert">
                        No hay compartimentos creados para este almacén.
                    </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}